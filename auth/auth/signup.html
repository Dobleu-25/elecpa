document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("signup-form");
  const message = document.getElementById("signup-message");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const email = document.getElementById("signup-email").value.trim();
    const password = document.getElementById("signup-password").value;

    // Validaciones básicas
    if (!email || !password) {
      message.textContent = "Por favor, completa todos los campos.";
      return;
    }

    if (password.length < 6) {
      message.textContent = "La contraseña debe tener al menos 6 caracteres.";
      return;
    }

    // Conexión con Netlify Identity
    const user = {
      email,
      password,
    };

    try {
      const result = await netlifyIdentity.signup(user);
      message.style.color = "green";
      message.textContent = "¡Registro exitoso!";
      console.log("Usuario registrado:", result);

      // Opcional: redirigir al login
      setTimeout(() => {
        window.location.href = "/auth/login.html";
      }, 2000);
    } catch (error) {
      message.style.color = "red";
      message.textContent = "Error en el registro: " + error.message;
      console.error("Error de registro:", error);
    }
  });
});
